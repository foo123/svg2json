/**
*
*   SVG2JSON Parse SVG string or nodes into a JSON
*   https://github.com/foo123/svg2json
*   @VERSION 1.1.0
*
**/
!function(e,t,s){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=s.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return s.moduleUri=t.uri,s.call(e)}):t in e||(e[t]=s.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}("undefined"!=typeof self?self:this,"svg2json",function(r){"use strict";var n=/<!--.*?-->/m,a=/\/\*.*?\*\//m,i=/<(\/)?([a-z0-9_:\-]+)\b\s*([^<>]*)\/?>/im,l=/([a-z0-9_:\-]+)\b\s*(?:=\s*"([^"]*)")?/im,s=/[MLHVCSQTAZ]/gi,o=/(matrix|scale|rotate|translate|skewX|skewY)\s*\(([^\(\)]*)\)/im,d=/-?(?:(?:\d+\.\d+)|(?:\.\d+)|(?:\d+))/g,p=Object.prototype.hasOwnProperty,y=(Math,{});function g(t){return t.trim()}function h(t,e){var s;for(e=e||n;s=t.match(e);)t=t.slice(0,s.index)+t.slice(s.index+s[0].length);return t}function m(t){return parseFloat(t||"")||0}function c(e){var n={"stroke-width":1,stroke:1,"stroke-opacity":1,"stroke-linecap":1,"stroke-linejoin":1,fill:1,"fill-opacity":1,"fill-rule":1},s=g(e.style?String(e.style.cssText||e.style):"").split(";").reduce(function(t,e){var e=g(e).split(":"),s=g(e[0]),e=g(e.slice(1).join(":"));return p.call(n,s)&&(t[s]=e),t},{});return Object.keys(n).forEach(function(t){p.call(e,t)&&(s[t]=e[t])}),s}function u(t){for(var e,s=g(t.transform||""),n=[];e=s.match(o);)n.push([g(e[1]).toLowerCase(),(g(e[2]).match(d)||[]).map(m)]),s=s.slice(e.index+e[0].length);return n.length?n:null}function f(t){for(var e,s,n=g(h(t,a)).split("{"),r=n.length-1,i=new Array(0<r?r:0),l=0;l<r;++l)s=n[l],e=n[l+1].split("}"),i[l]={selector:g(s),style:c({style:e[0]})},n[l+1]=e[1];return i}function b(t,c){c=[0,0];var e=(t=g(String(t))).match(s),u=t.split(s),f=[c[0],c[1]];return e?e.reduce(function(t,e,s){var n,r,i,l,a,o,p=e===e.toLowerCase(),h=(g(u[s+1]||"").match(d)||[]).map(m);switch(e.toUpperCase()){case"M":for(o=!1;2<=h.length;)o?(n=[c[0],c[1]],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=r[0],c[1]=r[1],!t.length||"Line"!==t[t.length-1].type&&"Polyline"!==t[t.length-1].type||t[t.length-1].Z?t.push({type:"Line",points:[n,r],pointsrel:[[r[0]-n[0],r[1]-n[1]]]}):(t[t.length-1].type="Polyline",t[t.length-1].points.push(r),t[t.length-1].pointsrel.push([r[0]-n[0],r[1]-n[1]]),t[t.length-1].H&&delete t[t.length-1].H,t[t.length-1].V&&delete t[t.length-1].V)):(f=[p?[h[0],h[1]]:[h[0]-c[0],h[1]-c[1]]],c[0]=(p?c[0]:0)+h.shift(),c[1]=(p?c[1]:0)+h.shift(),t.push({type:"Move",points:[c.slice()],pointsrel:f}),f=[c[0],c[1]]),o=!0;break;case"H":for(;1<=h.length;)n=[c[0],c[1]],r=[(p?n[0]:0)+h.shift(),n[1]],c[0]=r[0],c[1]=r[1],!t.length||"Line"!==t[t.length-1].type&&"Polyline"!==t[t.length-1].type||t[t.length-1].Z?t.push({type:"Line",points:[n,r],pointsrel:[[r[0]-n[0],r[1]-n[1]]],H:!0}):(t[t.length-1].type="Polyline",t[t.length-1].points.push(r),t[t.length-1].pointsrel.push([r[0]-n[0],r[1]-n[1]]),t[t.length-1].H&&delete t[t.length-1].H,t[t.length-1].V&&delete t[t.length-1].V);break;case"V":for(;1<=h.length;)r=[(n=[c[0],c[1]])[0],(p?n[1]:0)+h.shift()],c[0]=r[0],c[1]=r[1],!t.length||"Line"!==t[t.length-1].type&&"Polyline"!==t[t.length-1].type||t[t.length-1].Z?t.push({type:"Line",points:[n,r],pointsrel:[[r[0]-n[0],r[1]-n[1]]],V:!0}):(t[t.length-1].type="Polyline",t[t.length-1].points.push(r),t[t.length-1].pointsrel.push([r[0]-n[0],r[1]-n[1]]),t[t.length-1].H&&delete t[t.length-1].H,t[t.length-1].V&&delete t[t.length-1].V);break;case"L":for(;2<=h.length;)n=[c[0],c[1]],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=r[0],c[1]=r[1],!t.length||"Line"!==t[t.length-1].type&&"Polyline"!==t[t.length-1].type||t[t.length-1].Z?t.push({type:"Line",points:[n,r],pointsrel:[[r[0]-n[0],r[1]-n[1]]]}):(t[t.length-1].type="Polyline",t[t.length-1].points.push(r),t[t.length-1].pointsrel.push([r[0]-n[0],r[1]-n[1]]),t[t.length-1].H&&delete t[t.length-1].H,t[t.length-1].V&&delete t[t.length-1].V);break;case"A":for(;7<=h.length;)a={start:null,end:null,endrel:null,radiusX:h.shift(),radiusY:h.shift(),angle:h.shift(),largeArc:h.shift(),sweep:h.shift()},n=[c[0],c[1]],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=r[0],c[1]=r[1],a.start=n,a.end=r,a.endrel=[r[0]-n[0],r[1]-n[1]],t.push({type:"Arc",params:a});break;case"Q":for(;4<=h.length;)n=[c[0],c[1]],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=i[0],c[1]=i[1],t.push({type:"Quadratic",points:[n,r,i],pointsrel:[[r[0]-n[0],r[1]-n[1]],[i[0]-n[0],i[1]-n[1]]]});break;case"T":for(;2<=h.length;)a=t.length?t[t.length-1]:y,n=[c[0],c[1]],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],r="Quadratic"===a.type?[2*n[0]-a.points[1][0],2*n[1]-a.points[1][1]]:[n[0],n[1]],c[0]=i[0],c[1]=i[1],t.push({type:"Quadratic",points:[n,r,i],pointsrel:[[r[0]-n[0],r[1]-n[1]],[i[0]-n[0],i[1]-n[1]]],T:!0});break;case"C":for(;6<=h.length;)n=[c[0],c[1]],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],l=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=l[0],c[1]=l[1],t.push({type:"Cubic",points:[n,r,i,l],pointsrel:[[r[0]-n[0],r[1]-n[1]],[i[0]-n[0],i[1]-n[1]],[l[0]-n[0],l[1]-n[1]]]});break;case"S":for(;4<=h.length;)a=t.length?t[t.length-1]:y,n=[c[0],c[1]],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],l=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],r="Cubic"===a.type?[2*n[0]-a.points[2][0],2*n[1]-a.points[2][1]]:[n[0],n[1]],c[0]=l[0],c[1]=l[1],t.push({type:"Cubic",points:[n,r,i,l],pointsrel:[[r[0]-n[0],r[1]-n[1]],[i[0]-n[0],i[1]-n[1]],[l[0]-n[0],l[1]-n[1]]],S:!0});break;case"Z":n=[c[0],c[1]],r=[f[0],f[1]],c[0]=r[0],c[1]=r[1],f=[c[0],c[1]],t.push({type:"Line",points:[n,r],pointsrel:[[r[0]-n[0],r[1]-n[1]]],Z:!0})}return t},[]):[]}function x(t,e){var s,n;if(!e||!e.parsed)return t.tagName&&t.children?((n=function(t){var e,s,n={};if(t.attributes)for(e=0,s=t.attributes.length;e<s;++e)n[t.attributes[e].name.toLowerCase()]=t.attributes[e].value;return n}(t)).style=n.style?c(n):r,n.transform=n.transform?u(n):r,e.parsed=!0,{tag:t.tagName.toLowerCase(),atts:n,children:t.children,content:t.textContent}):!t.nodeType&&(s=e.index||0,t=(t=t.slice(s)).match(i))?(e.index=s+t.index+t[0].length,"/"===t[1]?{tag:t[2].toLowerCase(),end:!0,content:e.src.slice(e.start.pop(),s+t.index)}:((n=function(t){for(var e,s={};e=t.match(l);)s[e[1].toLowerCase()]=!e[2]||g(e[2]),t=t.slice(e.index+e[0].length);return s}(t[3])).style=n.style?c(n):r,n.transform=n.transform?u(n):r,(e.start=e.start||[]).push(e.index),{tag:t[2].toLowerCase(),atts:n,content:""})):void 0}function k(t,e,s){for(var n,r,i,l,a,o,p=[],h=s?1:0;n=x(t,e);)switch(n.tag){case"line":n.end||(o=[[m(n.atts.x1),m(n.atts.y1)],[m(n.atts.x2),m(n.atts.y2)]],p.push({type:"Line",id:n.atts.id,class:n.atts.class,style:n.atts.style,transform:n.atts.transform,points:o,pointsrel:o.slice(1).map(function(t){return[t[0]-o[0][0],t[1]-o[0][1]]})}));break;case"polyline":n.end||(o=((n.atts.points||"").match(d)||[]).map(m).reduce(function(t,e,s){return s%2?t[(s-1)/2][1]=e:t.push([e,0]),t},[]),p.push({type:"Polyline",id:n.atts.id,class:n.atts.class,style:n.atts.style,transform:n.atts.transform,points:o,pointsrel:o.slice(1).map(function(t){return[t[0]-o[0][0],t[1]-o[0][1]]})}));break;case"polygon":n.end||(o=((n.atts.points||"").match(d)||[]).map(m).reduce(function(t,e,s){return s%2?t[(s-1)/2][1]=e:t.push([e,0]),t},[]),p.push({type:"Polygon",id:n.atts.id,class:n.atts.class,style:n.atts.style,transform:n.atts.transform,points:o,pointsrel:o.slice(1).map(function(t){return[t[0]-o[0][0],t[1]-o[0][1]]})}));break;case"rect":n.end||(r=m(n.atts.x),i=m(n.atts.y),l=m(n.atts.width),a=m(n.atts.height),o=[[r,i],[r+l,i],[r+l,i+a],[r,i+a]],p.push({type:"Polygon",id:n.atts.id,class:n.atts.class,style:n.atts.style,transform:n.atts.transform,rect:[r,i,l,a],points:o,pointsrel:o.slice(1).map(function(t){return[t[0]-o[0][0],t[1]-o[0][1]]})}));break;case"circle":n.end||p.push({type:"Circle",id:n.atts.id,class:n.atts.class,style:n.atts.style,transform:n.atts.transform,center:[m(n.atts.cx),m(n.atts.cy)],radius:m(n.atts.r)});break;case"ellipse":n.end||p.push({type:"Ellipse",id:n.atts.id,class:n.atts.class,style:n.atts.style,transform:n.atts.transform,center:[m(n.atts.cx),m(n.atts.cy)],radiusX:m(n.atts.rx),radiusY:m(n.atts.ry),angle:0});break;case"path":n.end||p.push({type:"Path",id:n.atts.id,class:n.atts.class,style:n.atts.style,transform:n.atts.transform,d:b(n.atts.d||"")});break;case"g":if(n.end){if("g"===s&&0===--h)return p}else"g"===s&&++h,p.push({type:"Group",id:n.atts.id,class:n.atts.class,style:n.atts.style,transform:n.atts.transform,nodes:n.children?[].reduce.call(n.children,function(t,e){return t.push.apply(t,k(e,{index:0,src:e},"g")),t},[]):k(t,e,"g")});break;case"defs":if(n.end){if("defs"===s&&0===--h)return p}else"defs"===s&&++h,p.push({type:"Defs",nodes:n.children?[].reduce.call(n.children,function(t,e){return t.push.apply(t,k(e,{index:0,src:e},"defs")),t},[]):k(t,e,"defs")});break;case"style":if(n.end){if("style"===s&&0===--h)return f(n.content)}else"style"===s&&++h,p.push({type:"Style",rules:n.children?f(n.content):k(t,e,"style")});break;case"svg":if(n.end){if("svg"===s&&0===--h)return p}else"svg"===s&&++h,p.push({type:"SVG",viewBox:n.atts.viewbox?(n.atts.viewbox.match(d)||[]).map(m):null,width:n.atts.width||null,height:n.atts.height||null,nodes:n.children?[].reduce.call(n.children,function(t,e){return t.push.apply(t,k(e,{index:0},"svg")),t},[]):k(t,e,"svg")})}return p}function t(t){return t?t.tagName&&t.nodeType?k(t,{index:0,src:t}):k((t={index:0,src:h(g(String(t)))}).src,t):[]}return t.parsePath=b,t.VERSION="1.1.0",t});