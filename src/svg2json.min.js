/**
*
*   SVG2JSON Parse SVG string or nodes into a JSON
*   https://github.com/foo123/svg2json
*   @VERSION 2.0.0
*
**/
!function(e,t,s){"use strict";"object"==typeof module&&module.exports?(module.$deps=module.$deps||{})&&(module.exports=module.$deps[t]=s.call(e)):"function"==typeof define&&define.amd&&"function"==typeof require&&"function"==typeof require.specified&&require.specified(t)?define(t,["module"],function(t){return s.moduleUri=t.uri,s.call(e)}):t in e||(e[t]=s.call(e)||1)&&"function"==typeof define&&define.amd&&define(function(){return e[t]})}("undefined"!=typeof self?self:this,"svg2json",function(t){"use strict";var n=/<!--.*?-->/m,l=/\/\*.*?\*\//m,i=/<(\/)?([a-z0-9_:\-]+)\b\s*([^<>]*)\/?>/im,r=/([a-z0-9_:\-]+)\b\s*(?:=\s*"([^"]*)")?/im,s=/[MLHVCSQTAZ]/gi,a=/(matrix|scale|rotate|translate|skewX|skewY)\s*\(([^\(\)]*)\)/im,f=/-?(?:(?:\d+\.\d+)|(?:\.\d+)|(?:\d+))/g,o=Object.prototype.hasOwnProperty,g=(Math,{});function y(t){return t.trim()}function p(t,e){var s;for(e=e||n;s=t.match(e);)t=t.slice(0,s.index)+t.slice(s.index+s[0].length);return t}function m(t){return parseFloat(t||"")||0}function h(e){var n={"stroke-width":1,stroke:1,"stroke-opacity":1,"stroke-linecap":1,"stroke-linejoin":1,fill:1,"fill-opacity":1,"fill-rule":1},s=y(e.style?String(e.style.cssText||e.style):"").split(";").reduce(function(t,e){var e=y(e).split(":"),s=y(e[0]),e=y(e.slice(1).join(":"));return o.call(n,s)&&(t[s]=e),t},{});return Object.keys(n).forEach(function(t){o.call(e,t)&&(s[t]=e[t])}),s}function c(t,e){for(var s,n=y(t[e||"transform"]||""),i=[];s=n.match(a);)i.push([y(s[1]).toLowerCase(),(y(s[2]).match(f)||[]).map(m)]),n=n.slice(s.index+s[0].length);return i.length?i:null}function d(t){for(var e,s,n=y(p(t,l)).split("{"),i=n.length-1,r=new Array(0<i?i:0),a=0;a<i;++a)s=n[a],e=n[a+1].split("}"),r[a]={selector:y(s),style:h({style:e[0]})},n[a+1]=e[1];return r}function u(t,c){c=[0,0];var e=(t=y(String(t))).match(s),d=t.split(s),u=[c[0],c[1]];return e?e.reduce(function(t,e,s){var n,i,r,a,l,o,p=e===e.toLowerCase(),h=(y(d[s+1]||"").match(f)||[]).map(m);switch(e.toUpperCase()){case"M":for(o=!1;2<=h.length;)o?(n=[c[0],c[1]],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=i[0],c[1]=i[1],!t.length||"Line"!==t[t.length-1].type&&"Polyline"!==t[t.length-1].type||t[t.length-1].Z?t.push({type:"Line",points:[n,i],pointsrel:[[i[0]-n[0],i[1]-n[1]]]}):(t[t.length-1].type="Polyline",t[t.length-1].points.push(i),t[t.length-1].pointsrel.push([i[0]-n[0],i[1]-n[1]]),t[t.length-1].H&&delete t[t.length-1].H,t[t.length-1].V&&delete t[t.length-1].V)):(u=[p?[h[0],h[1]]:[h[0]-c[0],h[1]-c[1]]],c[0]=(p?c[0]:0)+h.shift(),c[1]=(p?c[1]:0)+h.shift(),t.push({type:"Move",points:[c.slice()],pointsrel:u}),u=[c[0],c[1]]),o=!0;break;case"H":for(;1<=h.length;)n=[c[0],c[1]],i=[(p?n[0]:0)+h.shift(),n[1]],c[0]=i[0],c[1]=i[1],!t.length||"Line"!==t[t.length-1].type&&"Polyline"!==t[t.length-1].type||t[t.length-1].Z?t.push({type:"Line",points:[n,i],pointsrel:[[i[0]-n[0],i[1]-n[1]]],H:!0}):(t[t.length-1].type="Polyline",t[t.length-1].points.push(i),t[t.length-1].pointsrel.push([i[0]-n[0],i[1]-n[1]]),t[t.length-1].H&&delete t[t.length-1].H,t[t.length-1].V&&delete t[t.length-1].V);break;case"V":for(;1<=h.length;)i=[(n=[c[0],c[1]])[0],(p?n[1]:0)+h.shift()],c[0]=i[0],c[1]=i[1],!t.length||"Line"!==t[t.length-1].type&&"Polyline"!==t[t.length-1].type||t[t.length-1].Z?t.push({type:"Line",points:[n,i],pointsrel:[[i[0]-n[0],i[1]-n[1]]],V:!0}):(t[t.length-1].type="Polyline",t[t.length-1].points.push(i),t[t.length-1].pointsrel.push([i[0]-n[0],i[1]-n[1]]),t[t.length-1].H&&delete t[t.length-1].H,t[t.length-1].V&&delete t[t.length-1].V);break;case"L":for(;2<=h.length;)n=[c[0],c[1]],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=i[0],c[1]=i[1],!t.length||"Line"!==t[t.length-1].type&&"Polyline"!==t[t.length-1].type||t[t.length-1].Z?t.push({type:"Line",points:[n,i],pointsrel:[[i[0]-n[0],i[1]-n[1]]]}):(t[t.length-1].type="Polyline",t[t.length-1].points.push(i),t[t.length-1].pointsrel.push([i[0]-n[0],i[1]-n[1]]),t[t.length-1].H&&delete t[t.length-1].H,t[t.length-1].V&&delete t[t.length-1].V);break;case"A":for(;7<=h.length;)l={start:null,end:null,endrel:null,radiusX:h.shift(),radiusY:h.shift(),angle:h.shift(),largeArc:h.shift(),sweep:h.shift()},n=[c[0],c[1]],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=i[0],c[1]=i[1],l.start=n,l.end=i,l.endrel=[i[0]-n[0],i[1]-n[1]],t.push({type:"Arc",params:l});break;case"Q":for(;4<=h.length;)n=[c[0],c[1]],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=r[0],c[1]=r[1],t.push({type:"Quadratic",points:[n,i,r],pointsrel:[[i[0]-n[0],i[1]-n[1]],[r[0]-n[0],r[1]-n[1]]]});break;case"T":for(;2<=h.length;)l=t.length?t[t.length-1]:g,n=[c[0],c[1]],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],i="Quadratic"===l.type?[2*n[0]-l.points[1][0],2*n[1]-l.points[1][1]]:[n[0],n[1]],c[0]=r[0],c[1]=r[1],t.push({type:"Quadratic",points:[n,i,r],pointsrel:[[i[0]-n[0],i[1]-n[1]],[r[0]-n[0],r[1]-n[1]]],T:!0});break;case"C":for(;6<=h.length;)n=[c[0],c[1]],i=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],a=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],c[0]=a[0],c[1]=a[1],t.push({type:"Cubic",points:[n,i,r,a],pointsrel:[[i[0]-n[0],i[1]-n[1]],[r[0]-n[0],r[1]-n[1]],[a[0]-n[0],a[1]-n[1]]]});break;case"S":for(;4<=h.length;)l=t.length?t[t.length-1]:g,n=[c[0],c[1]],r=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],a=[(p?n[0]:0)+h.shift(),(p?n[1]:0)+h.shift()],i="Cubic"===l.type?[2*n[0]-l.points[2][0],2*n[1]-l.points[2][1]]:[n[0],n[1]],c[0]=a[0],c[1]=a[1],t.push({type:"Cubic",points:[n,i,r,a],pointsrel:[[i[0]-n[0],i[1]-n[1]],[r[0]-n[0],r[1]-n[1]],[a[0]-n[0],a[1]-n[1]]],S:!0});break;case"Z":n=[c[0],c[1]],i=[u[0],u[1]],c[0]=i[0],c[1]=i[1],u=[c[0],c[1]],t.push({type:"Line",points:[n,i],pointsrel:[[i[0]-n[0],i[1]-n[1]]],Z:!0})}return t},[]):[]}function b(t,e){var s,n;if(!e||!e.parsed)return t.tagName&&t.children?((n=function(t){var e,s,n={};if(t.attributes)for(e=0,s=t.attributes.length;e<s;++e)n[t.attributes[e].name.toLowerCase()]=t.attributes[e].value;return n}(t)).style&&(n.style=h(n)),n.transform&&(n.transform=c(n,"transform")),n.gradienttransform&&(n.gradienttransform=c(n,"gradienttransform")),e.parsed=!0,{tag:t.tagName.toLowerCase(),atts:n,children:t.children,content:t.textContent}):!t.nodeType&&(s=e.index||0,t=(t=t.slice(s)).match(i))?(e.index=s+t.index+t[0].length,"/"===t[1]?{tag:t[2].toLowerCase(),end:!0,content:e.src.slice(e.start.pop(),s+t.index)}:((n=function(t){for(var e,s={};e=t.match(r);)s[e[1].toLowerCase()]=!e[2]||y(e[2]),t=t.slice(e.index+e[0].length);return s}(t[3])).style&&(n.style=h(n)),n.transform&&(n.transform=c(n,"transform")),n.gradienttransform&&(n.gradienttransform=c(n,"gradienttransform")),(e.start=e.start||[]).push(e.index),{tag:t[2].toLowerCase(),atts:n,content:""})):void 0}function k(t,e,s){for(var n,i,r,a,l,o,p=[],h=s?1:0;n=b(t,e);)switch(n.tag){case"line":n.end||(o=[[m(n.atts.x1),m(n.atts.y1)],[m(n.atts.x2),m(n.atts.y2)]],p.push({type:"Line",atts:n.atts,id:n.atts.id,class:n.atts.class,points:o,pointsrel:o.slice(1).map(function(t){return[t[0]-o[0][0],t[1]-o[0][1]]})}));break;case"polyline":n.end||(o=((n.atts.points||"").match(f)||[]).map(m).reduce(function(t,e,s){return s%2?t[(s-1)/2][1]=e:t.push([e,0]),t},[]),p.push({type:"Polyline",atts:n.atts,id:n.atts.id,class:n.atts.class,points:o,pointsrel:o.slice(1).map(function(t){return[t[0]-o[0][0],t[1]-o[0][1]]})}));break;case"polygon":n.end||(o=((n.atts.points||"").match(f)||[]).map(m).reduce(function(t,e,s){return s%2?t[(s-1)/2][1]=e:t.push([e,0]),t},[]),p.push({type:"Polygon",atts:n.atts,id:n.atts.id,class:n.atts.class,points:o,pointsrel:o.slice(1).map(function(t){return[t[0]-o[0][0],t[1]-o[0][1]]})}));break;case"rect":n.end||(i=m(n.atts.x),r=m(n.atts.y),a=m(n.atts.width),l=m(n.atts.height),o=[[i,r],[i+a,r],[i+a,r+l],[i,r+l]],p.push({type:"Polygon",atts:n.atts,id:n.atts.id,class:n.atts.class,rect:[i,r,a,l],points:o,pointsrel:o.slice(1).map(function(t){return[t[0]-o[0][0],t[1]-o[0][1]]})}));break;case"circle":n.end||p.push({type:"Circle",atts:n.atts,id:n.atts.id,class:n.atts.class,center:[m(n.atts.cx),m(n.atts.cy)],radius:m(n.atts.r)});break;case"ellipse":n.end||p.push({type:"Ellipse",atts:n.atts,id:n.atts.id,class:n.atts.class,center:[m(n.atts.cx),m(n.atts.cy)],radiusX:m(n.atts.rx),radiusY:m(n.atts.ry),angle:0});break;case"path":n.end||p.push({type:"Path",atts:n.atts,id:n.atts.id,class:n.atts.class,d:u(n.atts.d||"")});break;case"g":if(n.end){if("g"===s&&0===--h)return p}else"g"===s&&++h,p.push({type:"Group",atts:n.atts,id:n.atts.id,class:n.atts.class,nodes:n.children?[].reduce.call(n.children,function(t,e){return t.push.apply(t,k(e,{index:0,src:e},"g")),t},[]):k(t,e,"g")});break;case"defs":if(n.end){if("defs"===s&&0===--h)return p}else"defs"===s&&++h,p.push({type:"Defs",nodes:n.children?[].reduce.call(n.children,function(t,e){return t.push.apply(t,k(e,{index:0,src:e},"defs")),t},[]):k(t,e,"defs")});break;case"stop":n.end||p.push({type:"Stop",atts:n.atts,id:n.atts.id,class:n.atts.class});break;case"lineargradient":if(n.end){if("lineargradient"===s&&0===--h)return p}else p.push({type:"linearGradient",atts:n.atts,id:n.atts.id,stops:n.children?[].reduce.call(n.children,function(t,e){return t.push.apply(t,k(e,{index:0,src:e},"lineargradient")),t},[]):k(t,e,"lineargradient")});break;case"radialgradient":if(n.end){if("radialgradient"===s&&0===--h)return p}else p.push({type:"radialGradient",atts:n.atts,id:n.atts.id,stops:n.children?[].reduce.call(n.children,function(t,e){return t.push.apply(t,k(e,{index:0,src:e},"radialgradient")),t},[]):k(t,e,"radialgradient")});break;case"style":if(n.end){if("style"===s&&0===--h)return d(n.content)}else"style"===s&&++h,p.push({type:"Style",rules:n.children?d(n.content):k(t,e,"style")});break;case"svg":if(n.end){if("svg"===s&&0===--h)return p}else"svg"===s&&++h,p.push({type:"SVG",viewBox:n.atts.viewbox?(n.atts.viewbox.match(f)||[]).map(m):null,width:n.atts.width||null,height:n.atts.height||null,nodes:n.children?[].reduce.call(n.children,function(t,e){return t.push.apply(t,k(e,{index:0},"svg")),t},[]):k(t,e,"svg")})}return p}function e(t){return t?t.tagName&&t.nodeType?k(t,{index:0,src:t}):k((t={index:0,src:p(y(String(t)))}).src,t):[]}return e.parsePath=u,e.VERSION="2.0.0",e});